<!DOCTYPE html>
<html lang="ru" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="–î–æ—Å—Ç–∞–≤–∫–∞ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã—Ö –º—è—Å–Ω—ã—Ö –¥–µ–ª–∏–∫–∞—Ç–µ—Å–æ–≤ –≤ –°–∞–º–∞—Ä–µ ‚Äî –∫–æ–ø—á—ë–Ω–æ—Å—Ç–∏, —Ä—É–ª–µ—Ç—ã, –¥–∂–µ—Ä–∫–∏ –æ—Ç 30 –º–∏–Ω—É—Ç. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑ 1000 ‚ÇΩ."/>
  <meta property="og:title" content="–ú—è—Å–æ—Ä—É–±–∫–∞ ‚Äî –°–∞–º–∞—Ä—Å–∫–∏–µ –º—è—Å–Ω—ã–µ –¥–µ–ª–∏–∫–∞—Ç–µ—Å—ã —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π"/>
  <meta property="og:description" content="–ù–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ –∫–æ–ø—á—ë–Ω–æ—Å—Ç–∏ —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π –ø–æ –°–∞–º–∞—Ä–µ"/>
  <meta property="og:image" content="https://1.downloader.disk.yandex.ru/preview/f95a473bf16c9700812c84c18d7925774511a0818f0ad8383b7707011aaaa288/inf/WcbwbVtwf7eUItFSjokvS0wZ-k55BQ27XNWzHJJ37qAVf36VHCe4Dxv5UZtwSxAMx7nbOinax51bp1baEDBh0Q%3D%3D?uid=1733141611&filename=IMG_3013.JPG&disposition=inline&hash=&limit=0&content_type=image%2Fjpeg&owner_uid=1733141611&tknv=v3&size=1905x998"/>
  <title>–ú—è—Å–æ—Ä—É–±–∫–∞ | –°–∞–º–∞—Ä—Å–∫–∏–µ –º—è—Å–Ω—ã–µ –¥–µ–ª–∏–∫–∞—Ç–µ—Å—ã</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon"/>
  <style>
    :root {
      --bg: #f9f9f9;
      --text: #333;
      --card-bg: white;
      --accent: #8B0000;
      --shadow: rgba(0,0,0,0.1);
      --ribbon-bg: #ff0000;
    }
    [data-theme="dark"] {
      --bg: #121212;
      --text: #e0e0e0;
      --card-bg: #1e1e1e;
      --accent: #a00000;
      --shadow: rgba(0,0,0,0.4);
      --ribbon-bg: #c00000;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family: 'Arial', sans-serif; background:var(--bg); color:var(--text); transition:0.3s; }
    header {
      background:var(--card-bg);
      box-shadow:0 2px 10px var(--shadow);
      position:sticky; top:0; z-index:100;
    }
    nav {
      max-width:1200px; margin:0 auto; padding:1rem;
      display:flex; justify-content:space-between; align-items:center;
    }
    .logo { font-size:1.8rem; font-weight:bold; color:var(--accent); }
    .theme-toggle { background:none; border:none; font-size:1.6rem; cursor:pointer; }
    .cart-btn {
      background:var(--accent); color:white; padding:0.8rem 1.5rem;
      border-radius:30px; cursor:pointer; font-weight:bold;
      display:flex; align-items:center; gap:0.5rem;
      position:relative;
    }
    .cart-count { background:#ffcc00; color:black; border-radius:50%; width:24px; height:24px; display:flex; align-items:center; justify-content:center; font-size:0.9rem; position:absolute; top:-10px; right:-10px; }

    .hero {
      background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://1.downloader.disk.yandex.ru/preview/f95a473bf16c9700812c84c18d7925774511a0818f0ad8383b7707011aaaa288/inf/WcbwbVtwf7eUItFSjokvS0wZ-k55BQ27XNWzHJJ37qAVf36VHCe4Dxv5UZtwSxAMx7nbOinax51bp1baEDBh0Q%3D%3D?uid=1733141611&filename=IMG_3013.JPG&disposition=inline&hash=&limit=0&content_type=image%2Fjpeg&owner_uid=1733141611&tknv=v3&size=1905x998') center/cover no-repeat;
      color:white; text-align:center; padding:8rem 1rem;
    }
    .hero h1 { font-size:2.8rem; margin-bottom:1rem; }
    .hero p { font-size:1.4rem; }

    .container { max-width:1200px; margin:0 auto; padding:2rem 1rem; }

    .products { display:grid; grid-template-columns:repeat(auto-fill, minmax(280px,1fr)); gap:2rem; }
    .product-card {
      background:var(--card-bg); border-radius:16px; overflow:hidden;
      box-shadow:0 4px 15px var(--shadow); transition: all 0.3s ease; position:relative;
    }
    .product-card:hover { transform: scale(1.03); box-shadow:0 10px 25px var(--shadow); }
    .hit-ribbon {
      position:absolute; top:10px; left:-8px; background:var(--ribbon-bg); color:white;
      padding:0.4rem 1.8rem; font-size:0.9rem; font-weight:bold;
      transform:rotate(-45deg); z-index:2; box-shadow:0 2px 5px rgba(0,0,0,0.3);
    }
    .product-img { width:100%; height:300px; object-fit:cover; }
    .product-info { padding:1.5rem; text-align:left; }
    .product-info h3 { font-size:1.4rem; margin-bottom:0.5rem; }
    .weight { color:#666; font-size:0.9rem; margin-bottom:0.5rem; }
    .description { color:#777; font-size:0.95rem; margin-bottom:1rem; }
    .price { font-size:1.8rem; font-weight:bold; color:var(--accent); margin-bottom:1rem; }

    .quantity-block { display:flex; align-items:center; justify-content:center; gap:1rem; margin-bottom:1rem; }
    .quantity-btn {
      width:36px; height:36px; background:#eee; border:none; border-radius:50%;
      cursor:pointer; font-size:1.4rem; display:flex; align-items:center; justify-content:center;
    }
    .quantity-input { width:70px; text-align:center; font-size:1.2rem; padding:0.5rem; border:1px solid #ccc; border-radius:8px; }

    .btn-add { background:var(--accent); color:white; border:none; width:100%; padding:1rem; border-radius:12px; cursor:pointer; font-size:1.1rem; }
    .btn-add:hover { background:#a00000; }

    .mobile-cart-btn {
      position:fixed; bottom:20px; right:20px; background:var(--accent); color:white;
      width:60px; height:60px; border-radius:50%; display:flex; align-items:center;
      justify-content:center; font-size:1.8rem; box-shadow:0 4px 15px rgba(0,0,0,0.3);
      z-index:99; cursor:pointer; display:none;
    }
    #to-top {
      position:fixed; bottom:90px; right:20px; background:var(--accent); color:white;
      width:50px; height:50px; border-radius:50%; display:none; align-items:center;
      justify-content:center; font-size:1.5rem; box-shadow:0 4px 10px rgba(0,0,0,0.3);
      z-index:99; cursor:pointer;
    }

    footer { background:var(--card-bg); padding:2rem; text-align:center; margin-top:4rem; box-shadow:0 -2px 10px var(--shadow); }
    footer p { margin:0.8rem 0; font-size:1rem; }

    #cart-modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); align-items:center; justify-content:center; z-index:200; padding:1rem; }
    .cart-content { background:var(--card-bg); width:100%; max-width:800px; border-radius:20px; box-shadow:0 10px 40px rgba(0,0,0,0.3); max-height:90vh; overflow-y:auto; padding:1.5rem; }
    .cart-item { display:flex; align-items:center; gap:1rem; padding:1.5rem 1rem; border-bottom:1px solid #eee; }
    .cart-item img { width:100px; height:100px; object-fit:cover; border-radius:12px; }
    .cart-item-info { flex:1; }
    .quantity-controls { display:flex; align-items:center; gap:0.5rem; }
    .quantity-btn { width:36px; height:36px; background:#eee; border:none; border-radius:50%; cursor:pointer; font-size:1.2rem; }

    .cart-summary { font-size:1.3rem; text-align:right; padding:1rem 0; }
    .cart-summary strong { font-size:1.6rem; color:var(--accent); }
    .delivery-info { text-align:center; padding:1rem; background:#fff3e6; border-radius:12px; margin:1rem 0; font-size:1.1rem; }

    .order-form { display:grid; gap:1rem; }
    .order-form input, .order-form textarea, .order-form select { padding:1rem; border:1px solid #ccc; border-radius:8px; font-size:1rem; }

    #map-modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); z-index:300; align-items:center; justify-content:center; }
    #map-container { width:90%; height:80vh; background:white; border-radius:20px; overflow:hidden; box-shadow:0 10px 40px rgba(0,0,0,0.3); }
    #map { width:100%; height:100%; }

    #order-success-modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); z-index:400; align-items:center; justify-content:center; }
    .success-content { background:var(--card-bg); padding:3rem; border-radius:20px; text-align:center; max-width:500px; box-shadow:0 10px 40px rgba(0,0,0,0.3); }

    #payment-success-modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.6); z-index:300; align-items:center; justify-content:center; }

    @media (max-width:768px) {
      .mobile-cart-btn { display:flex; }
      .hero { padding:6rem 1rem; }
      .hero h1 { font-size:2.4rem; }
      .products { grid-template-columns:1fr 1fr; }
      .product-img { height:250px; }
    }
    @media (max-width:480px) {
      .products { grid-template-columns:1fr; }
      .hero h1 { font-size:2rem; }
    }
  </style>
  <script src="https://api-maps.yandex.ru/2.1/?apikey=2eabc960-bce3-4302-949c-2850871ae7f6&lang=ru_RU" type="text/javascript"></script>
</head>
<body>

<header>
  <nav>
    <div class="logo">–ú—è—Å–æ—Ä—É–±–∫–∞</div>
    <div style="display:flex; align-items:center; gap:1rem;">
      <button class="theme-toggle" id="themeToggle">üåô</button>
      <div class="cart-btn" onclick="openCart()">
        <span>–ö–æ—Ä–∑–∏–Ω–∞</span> <span class="cart-count" id="cartCount">0</span>
      </div>
    </div>
  </nav>
</header>

<section class="hero">
  <h1>–°–∞–º–∞—Ä—Å–∫–∏–µ –º—è—Å–Ω—ã–µ –¥–µ–ª–∏–∫–∞—Ç–µ—Å—ã —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π</h1>
  <p></p>
</section>

<div class="container">
  <h2 style="text-align:center; margin:3rem 0;">–ù–∞—à–µ –º–µ–Ω—é</h2>
  <div class="products" id="products"></div>
</div>

<footer>
  <p><strong>–ú—è—Å–æ—Ä—É–±–∫–∞</strong> ‚Äî –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ –º—è—Å–Ω—ã–µ –¥–µ–ª–∏–∫–∞—Ç–µ—Å—ã –≤ –°–∞–º–∞—Ä–µ</p>
  <p>Telegram: <a href="https://t.me/myasorubka63" style="color:var(--accent); text-decoration:none;">@myasorubka63</a></p>
</footer>

<div class="mobile-cart-btn" onclick="openCart()">üõí</div>
<button id="to-top">‚Üë</button>

<div id="cart-modal">
  <div class="cart-content">
    <h2 style="text-align:center; padding:1.5rem; border-bottom:2px solid #eee;">–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h2>
    <div id="cartItems"></div>

    <div class="delivery-info" id="deliveryInfo"></div>

    <div class="cart-summary">
      –°—É–º–º–∞ —Ç–æ–≤–∞—Ä–æ–≤: <span id="goodsSum">0 ‚ÇΩ</span><br>
      –î–æ—Å—Ç–∞–≤–∫–∞: <span id="deliverySum">150 ‚ÇΩ</span><br>
      <strong>–ò—Ç–æ–≥–æ: <span id="cartTotal">0 ‚ÇΩ</span></strong>
    </div>

    <form class="order-form" id="orderForm">
      <input type="text" placeholder="–í–∞—à–µ –∏–º—è" required>
      <input type="tel" id="phone-input" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" required>
      <div style="display:flex; gap:1rem;">
        <input type="text" id="address-input" placeholder="–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏" required style="flex:1;">
        <button type="button" onclick="openMap()" style="padding:1rem; background:#8B0000; color:white; border:none; border-radius:12px;">–ö–∞—Ä—Ç–∞</button>
      </div>
      <textarea placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)" rows="3"></textarea>
      <select id="paymentSelect" required>
        <option value="" disabled selected>–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</option>
        <option value="cash">–ù–∞–ª–∏—á–Ω—ã–º–∏ –∫—É—Ä—å–µ—Ä—É</option>
        <option value="online">–û–Ω–ª–∞–π–Ω (–ÆMoney)</option>
      </select>
      <button type="submit" style="width:100%; padding:1.2rem; background:#8B0000; color:white; border:none; border-radius:12px; font-size:1.3rem; margin-top:1rem;">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
    </form>

    <button style="width:100%; margin:1rem 0; padding:1rem; background:#ccc; border:none; border-radius:12px;" onclick="closeCart()">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<div id="order-success-modal">
  <div class="success-content">
    <h2>–ó–∞–∫–∞–∑ ‚Ññ<span id="success-number"></span> –æ—Ñ–æ—Ä–º–ª–µ–Ω!</h2>
    <p>–°—É–º–º–∞: <strong><span id="success-total"></span> ‚ÇΩ</strong></p>
    <p>–ú—ã –ø–æ–ª—É—á–∏–ª–∏ –≤–∞—à –∑–∞–∫–∞–∑.<br>–ß—Ç–æ–±—ã —É—Å–∫–æ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É ‚Äî –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º –≤ Telegram:</p>
    <a href="" id="tg-link" target="_blank" style="display:inline-block; padding:1.2rem 2.5rem; background:#0088cc; color:white; border-radius:12px; text-decoration:none; font-size:1.2rem; font-weight:bold; margin:1rem 0;">
      –ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram @myasorubka63
    </a>
    <button style="padding:1rem 2rem; background:#ccc; border:none; border-radius:12px; cursor:pointer;" onclick="document.getElementById('order-success-modal').style.display='none'; clearCartAfterOrder();">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<div id="map-modal">
  <div id="map-container">
    <div id="map"></div>
  </div>
</div>

<div id="payment-success-modal">
  <div class="success-content">
    <h2>–ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ–ø–ª–∞—á–µ–Ω!</h2>
    <p>–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–∫—É–ø–∫—É! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.</p>
    <button style="padding:1rem 2rem; background:#8B0000; color:white; border:none; border-radius:12px; font-size:1.2rem; cursor:pointer;" onclick="document.getElementById('payment-success-modal').style.display='none'; clearCartAfterOrder();">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<form id="autoYooForm" method="POST" action="https://yoomoney.ru/quickpay/confirm" target="_blank" style="display:none;">
  <input type="hidden" name="receiver" value="4100119441681698">
  <input type="hidden" name="quickpay-form" value="shop">
  <input type="hidden" name="targets" value="–û–ø–ª–∞—Ç–∞ –∑–∞–∫–∞–∑–∞ –º—è—Å–Ω—ã—Ö –¥–µ–ª–∏–∫–∞—Ç–µ—Å–æ–≤">
  <input type="hidden" name="sum" id="yooSum" value="">
  <input type="hidden" name="label" value="–ó–∞–∫–∞–∑ —Å —Å–∞–π—Ç–∞ –ú—è—Å–æ—Ä—É–±–∫–∞">
  <input type="hidden" name="successURL" value="https://—Ç–≤–æ–π-—Å–∞–π—Ç.vercel.app/?paid=true">
  <input type="hidden" name="paymentType" id="yooPaymentType" value="AC">
</form>

<script>
  const products = [
    { id:1, name:"–®–µ–π–∫–∞ —Å–≤–∏–Ω–∞—è –ø—Ä—è–Ω–∞—è", weight:"–ü—Ä–æ–¥–∞—ë—Ç—Å—è –ø–æ—à—Ç—É—á–Ω–æ, 1 —à—Ç. (400-500 –≥.)", desc:"–°–æ—á–Ω–∞—è, –∞—Ä–æ–º–∞—Ç–Ω–∞—è —à–µ–π–∫–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –±–∞–ª–∞–Ω—Å–æ–º —Å–ø–µ—Ü–∏–π", price:138, img:"https://sun9-33.userapi.com/s/v1/ig2/MMK9uOSsh6jW0SohrdBk2MFL2pwAp0EZATorWtM3BX7tfRXtahZuUJ2r1YbOdHTyw7aiEU9sAja768JTw5EuP5Lp.jpg?quality=95&as=32x38,48x57,72x85,108x127,160x189,240x283,360x424,480x566,540x637,640x755,720x849,1080x1274,1280x1509,1440x1698,2171x2560&from=bu&u=RMz9IMcvUfbVN442_tFhs9BFbAxP5Ud2XOmyeyQz8W8&cs=540x0" },
    { id:2, name:"–ù–æ–∂–∫–∞ —Ü—ã–ø–ª–µ–Ω–∫–∞ –∫–æ–ø—á—ë–Ω–∞—è", weight:"–ü—Ä–æ–¥–∞—ë—Ç—Å—è –ø–æ—à—Ç—É—á–Ω–æ, 1 —à—Ç. (200-400 –≥.)", desc:"–°–∞–º–∞—è –≤–∫—É—Å–Ω–∞—è –∏ —Å–æ—á–Ω–∞—è —á–∞—Å—Ç—å —Ç—É—à–∫–∏", price:89, img:"https://sun9-52.userapi.com/s/v1/ig2/KCyZy7EsKS7VSlaxEawOYiQRNpGk4Oh4e_fXcr-jTtQ6izOWexmIYe1YslFGRMDNWBs3Jr7iICY7BnI3zUNEs6qw.jpg?quality=95&as=32x43,48x64,72x96,108x144,160x213,240x320,360x480,480x640,540x720,640x853,720x960,1080x1440,1280x1707,1440x1920,1920x2560&from=bu&u=awMYMiivqgavq_IResOgRNzj1n7gxzd5NGqI01xX3p0&cs=540x0" },
    { id:3, name:"–ü–µ—Ä–µ–ø–µ–ª —Ü–µ–ª—ã–π –∫–æ–ø—á—ë–Ω—ã–π", weight:"–¶–µ–Ω–∞ –∑–∞ 1 —à—Ç", desc:"–ì–æ—Ç–æ–≤–∞—è –∫–æ–ø—á—ë–Ω–∞—è –ø—Ç–∏—Ü–∞ –ø—Ä–µ–º–∏—É–º-–∫–ª–∞—Å—Å–∞", price:350, img:"https://sun9-47.userapi.com/s/v1/ig2/QkocCq-Xz8AioCnGUwymW69xcG0RiecmxchIblpd_oWfvmaBYmU6Yz2wos0R4CsI8j-61xHsksC6kDMb4chvouIy.jpg?quality=95&as=32x24,48x36,72x54,108x81,160x120,240x180,360x270,480x360,540x405,640x480,720x540,1080x810,1280x960,1440x1080,2560x1920&from=bu&u=68pEt5VqOsGeJ5vctwRVMTEDydPA4f7sOJLLEfUofIU&cs=1080x0" },
    { id:4, name:"–û—Ä–µ—Ö –∏–∑ –∏–Ω–¥–µ–π–∫–∏ —Å –∫–ª—é–∫–≤–æ–π", weight:"–ü—Ä–æ–¥–∞—ë—Ç—Å—è –ø–æ—à—Ç—É—á–Ω–æ, 1 —à—Ç. (400-500 –≥.)", desc:"–ù–µ–∂–Ω–æ–µ –±–µ–¥—Ä–æ –∏–Ω–¥–µ–π–∫–∏ —Å –≤—è–ª–µ–Ω–æ–π –∫–ª—é–∫–≤–æ–π", price:145, img:"https://sun9-42.userapi.com/s/v1/ig2/CP2_vP7XKT3fvKSh56rTrG-hKf6a4O7c6FuJyYJO7S-pmvt3qkw6DP2zhTet6oXjjxboGT0sUg978_Bs8Tqv4e-c.jpg?quality=95&as=32x45,48x68,72x102,108x153,160x227,240x341,360x511,480x682,540x767,640x909,720x1022,1080x1533,1280x1817,1440x2045,1803x2560&from=bu&u=PvmwbWztinE0Pqc_tag79q_owU2K7pZlPWyLwAJpzPw&cs=540x0" },
    { id:5, name:"–î—É—ç—Ç –≤ –±–µ–∫–æ–Ω–µ", weight:"–ü—Ä–æ–¥–∞–µ—Ç—Å—è –ø–æ—à—Ç—É—á–Ω–æ, 1 —à—Ç. (400-500 –≥)", desc:"–°–≤–∏–Ω–∞—è –≤—ã—Ä–µ–∑–∫–∞ + –∫—É—Ä–∏–Ω–æ–µ —Ñ–∏–ª–µ –≤ —Ö—Ä—É—Å—Ç—è—â–µ–º –±–µ–∫–æ–Ω–µ", price:135, img:"https://sun9-80.userapi.com/s/v1/ig2/C_c0FYAF4uhKcNEg1Ya5K1bChVbz3Pwaaztjr3EyDmbAjb3a7w_YXC2VT4bj6KklBVDr3pz2Nd_D71Y6IxtT1-Bu.jpg?quality=95&as=32x43,48x64,72x96,108x144,160x213,240x320,360x480,480x640,540x720,640x853,720x960,1080x1440,1280x1707,1440x1920,1920x2560&from=bu&u=U8JGKfalq3vQl3J3Dm7IbLrnknYBVS32gFnBsMc8mzk&cs=540x0" },
    { id:6, name:"–†—É–ª–µ—Ç –ü–∞–Ω—á–µ—Ç—Ç–∞", weight:"–ü—Ä–æ–¥–∞–µ—Ç—Å—è –ø–æ—à—Ç—É—á–Ω–æ, 1 —à—Ç. (400-500 –≥)", desc:"–ò—Ç–∞–ª—å—è–Ω—Å–∫–∏–π –±–µ–∫–æ–Ω –∏–∑ —Å–≤–∏–Ω–æ–π –≥—Ä—É–¥–∏–Ω–∫–∏", price:105, img:"https://sun9-78.userapi.com/s/v1/ig2/ZxX1qh16D0EsfV0CHPHjOaArr0fXfsaWRciRNOm9s72zxp02tAQOIn5IDOy2F0nkPwn0WuQuDtjHVZsj9TM27HmM.jpg?quality=95&as=32x43,48x64,72x96,108x144,160x213,240x320,360x480,480x640,540x720,640x853,720x960,1080x1440,1280x1707,1440x1920,1920x2560&from=bu&u=EicW6j8guDdoWYjx_sIqEBeqAKT5BDXePq5iHoYmXBw&cs=540x0" },
    { id:7, name:"–ö—É—Ä–∏–Ω–∞—è –≥—Ä—É–¥–∫–∞ —Å—ã—Ä–æ–∫–æ–ø—á–µ–Ω–∞—è", weight:"–ü—Ä–æ–¥–∞–µ—Ç—Å—è –ø–æ—à—Ç—É—á–Ω–æ, 1 —à—Ç. (–æ—Ç 200 –≥)", desc:"–û—á–µ–Ω—å –≤–∫—É—Å–Ω—ã–π –º—è—Å–Ω–æ–π –¥–µ–ª–∏–∫–∞—Ç–µ—Å, –∏–º–µ–µ—Ç —è—Ä–∫–∏–π —Å–æ—á–Ω—ã–π –≤–∫—É—Å –∏ –∞–ø–ø–µ—Ç–∏—Ç–Ω—ã–π –∞—Ä–æ–º–∞—Ç –ø—Ä—è–Ω–æ—Å—Ç–µ–π –∏ –∫–æ–ø—á–µ–Ω–∏—è.", price:120, img:"https://sun9-21.userapi.com/s/v1/ig2/XhN8JnwC5CpMbU5Mma19YbXTRYV1WlG7odAO_qpU9phTDGjaUg-kx5fwCxopIEwhsyZfqi6VLvnuvaqL2k_xEXkp.jpg?quality=95&as=32x45,48x68,72x102,108x153,160x226,240x339,360x509,480x679,540x764,640x905,720x1018,1080x1528,1280x1810,1440x2037,1810x2560&from=bu&u=hPmM8-mltV5YRLA6igmsJGoXLFeefocvEb8PuikeWtE&cs=540x0" },
    { id:8, name:"–í—ã—Ä–µ–∑–∫–∞ —Å–≤–∏–Ω–∞—è –≤–∞—Ä–µ–Ω–æ-–∫–æ–ø—á–µ–Ω–∞—è.", weight:"–ü—Ä–æ–¥–∞–µ—Ç—Å—è –ø–æ—à—Ç—É—á–Ω–æ, 1 —à—Ç. (400-500 –≥)", desc:"–ù–µ–∂–Ω–∞—è –≤–∞—Ä–µ–Ω–æ-–∫–æ–ø—á–µ–Ω–∞—è —Å–≤–∏–Ω–∞—è –≤—ã—Ä–µ–∑–∫–∞ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º —á–µ—Å–Ω–æ–∫–∞, –∏–º–±–∏—Ä—è –∏ –∞—Ä–æ–º–∞—Ç–Ω—ã—Ö —Å–ø–µ—Ü–∏–π.", price:106, img:"https://sun9-54.userapi.com/s/v1/ig2/fEiWk-OrclsKLmQ1eGXk4nqLlb8WLEpsJ36jslwQ5XFqo8-xUp0vefeq8aICh4PaD-FeUXovQ7UMS_EbgicxLTnN.jpg?quality=95&as=32x43,48x64,72x96,108x144,160x213,240x320,360x480,480x640,540x720,640x853,720x960,1080x1440,1280x1707,1440x1920,1920x2560&from=bu&u=tVWa9Mb7wi3P_nlAqawxcjl319-2Wsb36tKzbPOb-S8&cs=540x0" },
    { id:9, name:"–î–∂–µ—Ä–∫–∏", weight:"–ü—Ä–æ–¥–∞–µ—Ç—Å—è –ø–æ—à—Ç—É—á–Ω–æ, 1 —à—Ç. (100 –≥)", desc:"–î–∂–µ—Ä–∫–∏ –∏–∑ —Å–≤–∏–Ω–∏–Ω—ã - –ø–æ–∂–∞–ª—É–π, –æ–¥–Ω–∞ –∏–∑ –ª—É—á—à–∏—Ö –∑–∞–∫—É—Å–æ–∫ –≤ –º–∏—Ä–µ.", price:300, img:"https://sun9-6.userapi.com/s/v1/ig2/xj8JtnKcUrpTbfb0zh3yb1ude5AGy7yKTJK0Rzjft_RCwsx_UIYoEEkCOEabaUzWeG06ioubg79dEOdnH1uoZwBB.jpg?quality=95&as=32x43,48x64,72x96,108x144,160x213,240x320,360x480,480x640,540x720,640x853,720x960,1080x1440,1280x1707,1440x1920,1920x2560&from=bu&u=ShA4DhVJoWkIej-02SLyIPahDJRwflhWzsvlsLjR0A0&cs=540x0" },
    { id:10, name:"–ü–∏–≤—á–∏–∫–∏", weight:"–ü—Ä–æ–¥–∞–µ—Ç—Å—è –ø–æ—à—Ç—É—á–Ω–æ, 1 —à—Ç. (100–≥)", desc:"–ü–∏–≤—á–∏–∫–∏ –ø–æ–¥–∫–æ–ø—á–µ–Ω—ã–µ - –≤–∫—É—Å–Ω–∞—è –∑–∞–∫—É—Å–∫–∞ –¥–∞–≤–Ω–æ –ø–æ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤—É –æ—Ü–µ–Ω–µ–Ω–∞ –∫–∞–∫ –ª—é–±–∏—Ç–µ–ª—è–º–∏ –ø–µ–Ω–Ω–æ–≥–æ, —Ç–∞–∫ –∏ —Ç–µ–º–∏, –∫—Ç–æ –ø—Ä–æ—Å—Ç–æ –ª—é–±–∏—Ç –≤–∫—É—Å–Ω–æ –∏ —Å—ã—Ç–Ω–æ –ø–µ—Ä–µ–∫—É—Å–Ω—É—Ç—å.", price:200, img:"https://sun9-76.userapi.com/s/v1/ig2/TvfhWOYT0RacWgoUbAB4NvnrP4rkm1ZsoQ7cFvfpmUVPzmFR77__lrLu9xrqBi3JnacjylPD9cS7k-OOJRyB-LF1.jpg?quality=95&as=32x43,48x64,72x96,108x144,160x213,240x320,360x480,480x640,540x720,640x853,720x960,1080x1440,1280x1707,1440x1920,1920x2560&from=bu&u=VkMK1WdWqhMIxsk3UdOqRfm_VJp_o57QeeY6XITpAYs&cs=540x0" },
    { id:11, name:"–ì—Ä—É–¥–∏–Ω–∫–∞ –≤–∞—Ä–µ–Ω–æ-–∫–æ–ø—á–µ–Ω–∞—è", weight:"–ü—Ä–æ–¥–∞–µ—Ç—Å—è –ø–æ—à—Ç—É—á–Ω–æ, 1 —à—Ç. (400-500 –≥)", desc:"–ì—Ä—É–¥–∏–Ω–∫–∞ –≤–∞—Ä–µ–Ω–æ-–∫–æ–ø—á–µ–Ω–∞—è - –æ–¥–Ω–∞ –∏–∑ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏—Ö –∑–∞–∫—É—Å–æ–∫, –º—è—Å–Ω–æ–µ –ª–∞–∫–æ–º—Å—Ç–≤–æ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω–æ–µ –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏, –≤–∞—Ä–∫–æ–π –∏ –∫–æ–ø—á–µ–Ω–∏–µ–º.", price:98, img:"https://sun9-81.userapi.com/s/v1/ig2/jxQ7YaJJgHKQ8ds6ICzXHVxmZydCeavGnaPc4-9CGz1tXrND-M61mbi4u8MzqTxs1Mrb93lS14hYSqgjfNOY2KmA.jpg?quality=95&as=32x43,48x64,72x96,108x144,160x213,240x320,360x480,480x640,540x720,640x853,720x960,1080x1440,1280x1707,1440x1920,1920x2560&from=bu&u=FZMnHHe0q2WecBXk8rIamFFfW6owFO8VTJxGwafH5mI&cs=540x0" },
    { id:12, name:"–†–µ–±—Ä–∞ —Å–≤–∏–Ω—ã–µ", weight:"–ü—Ä–æ–¥–∞–µ—Ç—Å—è –ø–æ—à—Ç—É—á–Ω–æ, 1 —à—Ç. (300-500 –≥)", desc:"–†–µ–±—Ä–∞ —Å–≤–∏–Ω—ã–µ –≥–æ—Ä—è—á–µ–≥–æ –∫–æ–ø—á–µ–Ω–∏—è - –æ–¥–∏–Ω –∏–∑ –¥–µ–ª–∏–∫–∞—Ç–µ—Å–æ–≤ —Å –∞—Ä–æ–º–∞—Ç–Ω—ã–º –∏ –æ—á–µ–Ω—å –≤–∫—É—Å–Ω—ã–º –º—è—Å–æ–º.", price:98, img:"https://sun9-68.userapi.com/s/v1/ig2/yOIOF-NMPwXtKlTBwDgQKYW6-WYM-gZvzBNGwGCby9QQLJQzfVLOwZ8DBPMLzji3rlM1VgCyoRODZRXaVkIbl6eM.jpg?quality=95&as=32x42,48x63,72x95,108x143,160x212,240x317,360x476,480x635,540x714,640x846,720x952,1080x1428,1280x1693,1440x1904,1936x2560&from=bu&u=XoBCHQnsjvExcVTFGXccNtPT8LMf0ltljyYvJfST5-U&cs=540x0" },
    { id:13, name:"–ö—Ä–∞–∫–æ–≤—Å–∫–∞—è –∫–æ–ª–±–∞—Å–∞", weight:"–ü—Ä–æ–¥–∞–µ—Ç—Å—è –ø–æ—à—Ç—É—á–Ω–æ, 1 —à—Ç. (400-500 –≥)", desc:"–ö—Ä–∞–∫–æ–≤—Å–∫–∞—è –∫–æ–ª–±–∞—Å–∞ - –≤ —Å–æ—Å—Ç–∞–≤–µ –æ—Ç–±–æ—Ä–Ω–∞—è —Å–≤–∏–Ω–∏–Ω–∞, –≤—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –≥–æ–≤—è–¥–∏–Ω–∞.", price:122, img:"https://sun9-55.userapi.com/s/v1/ig2/yN8sa5dqPdXeMzCl_7WE1kUFA5w-Jxp-PQsJV3OWLyHfmslofI007_R87qbCj-tgaaLCrkQADj0PNLwo9-3745Ah.jpg?quality=95&as=32x36,48x54,72x81,108x121,160x179,240x269,360x403,480x538,540x605,640x717,720x806,1080x1209,1280x1433,1440x1613,2286x2560&from=bu&u=ZWZwlsROrfhlmcz7FW-xQzK6lmgkkgs1fYlvJbpx0ro&cs=540x0" },
  ];

  let cart = JSON.parse(localStorage.getItem('cart')) || [];

  const MIN_ORDER = 1000;
  const FREE_DELIVERY_FROM = 5555;
  const DELIVERY_COST = 150;

  const BOT_TOKEN = '7857746746:AAGppBRxVA72xVEhXmvPYsWxoV3fDpvKdZY';
  const ADMIN_CHAT_ID = '7900316924';

  // –¢–µ–º–∞
  const themeToggle = document.getElementById('themeToggle');
  themeToggle.addEventListener('click', () => {
    const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
    document.documentElement.setAttribute('data-theme', isDark ? 'light' : 'dark');
    localStorage.setItem('theme', isDark ? 'light' : 'dark');
    themeToggle.textContent = isDark ? 'üåô' : '‚òÄÔ∏è';
  });
  if (localStorage.getItem('theme') === 'dark') {
    document.documentElement.setAttribute('data-theme', 'dark');
    themeToggle.textContent = '‚òÄÔ∏è';
  }

  // –ö–Ω–æ–ø–∫–∞ –Ω–∞–≤–µ—Ä—Ö
  window.addEventListener('scroll', () => {
    document.getElementById('to-top').style.display = window.scrollY > 400 ? 'flex' : 'none';
  });

  function renderProducts() {
    const container = document.getElementById('products');
    container.innerHTML = '';
    products.forEach((p, i) => {
      const isHit = i < 6;
      const card = document.createElement('div');
      card.className = 'product-card';
      card.innerHTML = `
        ${isHit ? '<div class="hit-ribbon">–•–∏—Ç</div>' : ''}
        <img class="product-img" src="${p.img}" alt="${p.name}" loading="lazy">
        <div class="product-info">
          <h3>${p.name}</h3>
          <div class="weight">${p.weight}</div>
          <div class="description">${p.desc}</div>
          <div class="price">${p.price} ‚ÇΩ</div>
          <div class="quantity-block">
            <button class="quantity-btn" type="button">‚àí</button>
            <input type="number" class="quantity-input" value="1" min="1">
            <button class="quantity-btn" type="button">+</button>
          </div>
          <button class="btn-add" type="button">–í –∫–æ—Ä–∑–∏–Ω—É</button>
        </div>
      `;
      container.appendChild(card);

      const minusBtn = card.querySelectorAll('.quantity-btn')[0];
      const plusBtn = card.querySelectorAll('.quantity-btn')[1];
      const input = card.querySelector('.quantity-input');
      const addBtn = card.querySelector('.btn-add');

      minusBtn.addEventListener('click', () => { if (input.value > 1) input.value--; });
      plusBtn.addEventListener('click', () => { input.value = parseInt(input.value) + 1; });
      addBtn.addEventListener('click', () => {
        const qty = parseInt(input.value) || 1;
        const existing = cart.find(item => item.id === p.id);
        if (existing) existing.quantity += qty;
        else cart.push({ ...p, quantity: qty });
        saveCart();
        updateCartCount();
        if (document.getElementById('cart-modal').style.display === 'flex') renderCart();
        alert(`${p.name} √ó ${qty} –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∫–æ—Ä–∑–∏–Ω—É!`);
      });
    });
  }

  function saveCart() { localStorage.setItem('cart', JSON.stringify(cart)); }

  function updateCartCount() {
    const count = cart.reduce((s, i) => s + i.quantity, 0);
    document.getElementById('cartCount').textContent = count;
  }

  function renderCart() {
    const container = document.getElementById('cartItems');
    container.innerHTML = '';
    let totalGoods = 0;

    if (cart.length === 0) {
      container.innerHTML = '<p style="text-align:center; padding:3rem; color:#999;">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>';
      document.getElementById('goodsSum').textContent = '0 ‚ÇΩ';
      document.getElementById('deliverySum').textContent = '0 ‚ÇΩ';
      document.getElementById('cartTotal').textContent = '0 ‚ÇΩ';
      document.getElementById('deliveryInfo').innerHTML = '';
      return;
    }

    cart.forEach(item => {
      const itemTotal = item.price * item.quantity;
      totalGoods += itemTotal;
      const div = document.createElement('div');
      div.className = 'cart-item';
      div.innerHTML = `
        <img src="${item.img}" alt="${item.name}">
        <div class="cart-item-info">
          <strong>${item.name}</strong><br>
          ${item.weight} ‚Ä¢ ${item.price} ‚ÇΩ √ó ${item.quantity} = ${itemTotal} ‚ÇΩ
        </div>
        <div class="quantity-controls">
          <button class="quantity-btn" onclick="changeQuantity(${item.id}, -1)">‚àí</button>
          <span>${item.quantity}</span>
          <button class="quantity-btn" onclick="changeQuantity(${item.id}, 1)">+</button>
          <button style="color:red; margin-left:1rem;" onclick="removeFromCart(${item.id})">–£–¥–∞–ª–∏—Ç—å</button>
        </div>
      `;
      container.appendChild(div);
    });

    const deliveryCost = totalGoods >= FREE_DELIVERY_FROM ? 0 : DELIVERY_COST;
    const grandTotal = totalGoods + deliveryCost;

    document.getElementById('goodsSum').textContent = totalGoods + ' ‚ÇΩ';
    document.getElementById('deliverySum').textContent = deliveryCost === 0 ? '–±–µ—Å–ø–ª–∞—Ç–Ω–æ' : deliveryCost + ' ‚ÇΩ';
    document.getElementById('cartTotal').textContent = grandTotal + ' ‚ÇΩ';

    document.getElementById('deliveryInfo').innerHTML = deliveryCost === 0 
      ? '<strong>–î–æ—Å—Ç–∞–≤–∫–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ!</strong>' 
      : `–î–æ—Å—Ç–∞–≤–∫–∞: ${DELIVERY_COST} ‚ÇΩ (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –æ—Ç ${FREE_DELIVERY_FROM} ‚ÇΩ)`;
  }

  function changeQuantity(id, delta) {
    const item = cart.find(i => i.id === id);
    if (item) {
      item.quantity += delta;
      if (item.quantity <= 0) removeFromCart(id);
      else {
        saveCart();
        updateCartCount();
        renderCart();
      }
    }
  }

  function removeFromCart(id) {
    cart = cart.filter(i => i.id !== id);
    saveCart();
    updateCartCount();
    renderCart();
  }

  function openCart() {
    renderCart();
    document.getElementById('cart-modal').style.display = 'flex';
  }

  function closeCart() {
    document.getElementById('cart-modal').style.display = 'none';
  }

  // –ú–∞—Å–∫–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
  document.getElementById('phone-input').addEventListener('input', function(e) {
    let x = e.target.value.replace(/\D/g, '').match(/(\d{0,1})(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})/);
    if (!x[2] && x[1] !== '7') x[1] = '7';
    e.target.value = !x[2] ? '+7' : '+7 (' + x[2] + ') ' + x[3] + (x[4] ? '-' + x[4] : '') + (x[5] ? '-' + x[5] : '');
  });

  let ymap;
  function openMap() {
    document.getElementById('map-modal').style.display = 'flex';
    if (!ymap) {
      ymaps.ready(() => {
        ymap = new ymaps.Map("map", { center: [53.2007, 50.1478], zoom: 12 });
        ymap.events.add('click', e => {
          const coords = e.get('coords');
          ymaps.geocode(coords).then(res => {
            const first = res.geoObjects.get(0);
            if (first) {
              document.getElementById('address-input').value = first.getAddressLine();
              document.getElementById('map-modal').style.display = 'none';
            }
          });
        });
      });
    }
  }

  document.getElementById('map-modal').addEventListener('click', e => {
    if (e.target === this) this.style.display = 'none';
  });

  document.getElementById('orderForm').addEventListener('submit', function(e) {
    e.preventDefault();

    const cleanedPhone = document.getElementById('phone-input').value.replace(/\D/g, '');
    if (cleanedPhone.length !== 11) {
      alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (11 —Ü–∏—Ñ—Ä)');
      return;
    }

    let totalGoods = 0;
    cart.forEach(item => totalGoods += item.price * item.quantity);

    if (totalGoods < MIN_ORDER) {
      alert(`–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞ ‚Äî ${MIN_ORDER} ‚ÇΩ (–ø–æ —Ç–æ–≤–∞—Ä–∞–º)\n\n–°–µ–π—á–∞—Å: ${totalGoods} ‚ÇΩ`);
      return;
    }

    const deliveryCost = totalGoods >= FREE_DELIVERY_FROM ? 0 : DELIVERY_COST;
    const total = totalGoods + deliveryCost;

    const orderNumber = 'M' + Date.now().toString().slice(-6);

    const orderData = {
      number: orderNumber,
      name: this[0].value,
      phone: document.getElementById('phone-input').value,
      address: document.getElementById('address-input').value,
      comment: this[3].value || '–Ω–µ—Ç',
      total: total,
      payment: document.getElementById('paymentSelect').value
    };

    localStorage.setItem('lastOrder', JSON.stringify(orderData));
    sendOrderToAdmin(orderData);

    const tgMessage = `–ó–∞–∫–∞–∑ ‚Ññ${orderNumber}%0A–ò–º—è: ${orderData.name}%0A–¢–µ–ª–µ—Ñ–æ–Ω: ${orderData.phone}%0A–ê–¥—Ä–µ—Å: ${encodeURIComponent(orderData.address)}%0A–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: ${orderData.comment}%0A–°—É–º–º–∞: ${total} ‚ÇΩ`;
    const tgLink = `https://t.me/myasorubka63?text=${tgMessage}`;

    document.getElementById('success-number').textContent = orderNumber;
    document.getElementById('success-total').textContent = total;
    document.getElementById('tg-link').href = tgLink;
    document.getElementById('order-success-modal').style.display = 'flex';

    if (orderData.payment === 'online') {
      document.getElementById('yooSum').value = total;
      document.getElementById('autoYooForm').submit();
    }

    closeCart();
  });

  function sendOrderToAdmin(orderData) {
    let text = `*–ù–æ–≤—ã–π –∑–∞–∫–∞–∑ ‚Ññ${orderData.number}*\n\n`;
    text += `–ò–º—è: ${orderData.name}\n–¢–µ–ª–µ—Ñ–æ–Ω: ${orderData.phone}\n–ê–¥—Ä–µ—Å: ${orderData.address}\n–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: ${orderData.comment}\n\n*–¢–æ–≤–∞—Ä—ã:*\n`;
    cart.forEach(item => text += `‚Ä¢ ${item.name} √ó ${item.quantity} = ${item.price * item.quantity} ‚ÇΩ\n`);
    text += `\n–ò—Ç–æ–≥–æ: ${orderData.total} ‚ÇΩ\n–û–ø–ª–∞—Ç–∞: ${orderData.payment === 'cash' ? '–Ω–∞–ª–∏—á–Ω—ã–º–∏' : '–æ–Ω–ª–∞–π–Ω'}`;

    fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${ADMIN_CHAT_ID}&text=${encodeURIComponent(text)}&parse_mode=Markdown`);
  }

  function clearCartAfterOrder() {
    cart = [];
    saveCart();
    updateCartCount();
    localStorage.removeItem('lastOrder');
  }

  window.addEventListener('load', function() {
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('paid') === 'true') {
      const saved = localStorage.getItem('lastOrder');
      if (saved) {
        const orderData = JSON.parse(saved);
        sendOrderToAdmin({ ...orderData, payment: 'online' });
        document.getElementById('payment-success-modal').style.display = 'flex';
        clearCartAfterOrder();
      }
      history.replaceState({}, '', window.location.pathname);
    }

    renderProducts();
    updateCartCount();
  });

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  renderProducts();
  updateCartCount();
</script>
</body>
</html>